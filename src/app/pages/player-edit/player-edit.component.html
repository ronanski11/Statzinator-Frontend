<!-- src/app/pages/player-edit/player-edit.component.html -->
<div class="edit-player-container">
  <!-- Loading state -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Loading player details</p>
  </div>

  <!-- Error state -->
  <div *ngIf="!loading && error" class="error-container">
    <mat-icon color="warn">error</mat-icon>
    <p>{{ error }}</p>
    <button mat-button color="primary" (click)="loadPlayerDetails()">
      Try Again
    </button>
  </div>

  <!-- Edit form -->
  <div *ngIf="!loading && !error && player">
    <mat-card class="edit-card">
      <mat-card-header>
        <div mat-card-avatar class="player-avatar">
          <mat-icon>person</mat-icon>
        </div>
        <mat-card-title>Edit Player</mat-card-title>
        <mat-card-subtitle>Player #{{ player.id }}</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <form [formGroup]="playerForm" (ngSubmit)="onSubmit()">
          <div class="form-content">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Full Name</mat-label>
              <input
                matInput
                formControlName="fullName"
                placeholder="Enter player's full name"
                required
              />
              <mat-error
                *ngIf="playerForm.get('fullName')?.hasError('required')"
              >
                Player name is required
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Height (cm)</mat-label>
              <input
                matInput
                type="number"
                formControlName="height"
                placeholder="Enter height in cm"
                required
              />
              <mat-error *ngIf="playerForm.get('height')?.hasError('required')">
                Height is required
              </mat-error>
              <mat-error *ngIf="playerForm.get('height')?.hasError('min')">
                Height must be positive
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Weight (kg)</mat-label>
              <input
                matInput
                type="number"
                formControlName="weight"
                placeholder="Enter weight in kg"
                required
              />
              <mat-error *ngIf="playerForm.get('weight')?.hasError('required')">
                Weight is required
              </mat-error>
              <mat-error *ngIf="playerForm.get('weight')?.hasError('min')">
                Weight must be positive
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Date of Birth</mat-label>
              <input
                matInput
                [matDatepicker]="picker"
                formControlName="dateOfBirth"
                required
              />
              <mat-datepicker-toggle
                matIconSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
              <mat-error
                *ngIf="playerForm.get('dateOfBirth')?.hasError('required')"
              >
                Date of birth is required
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Team</mat-label>
              <mat-select formControlName="teamId" required>
                <mat-option *ngIf="loadingTeams" value=""
                  >Loading teams...</mat-option
                >
                <mat-option *ngFor="let team of teams" [value]="team.id">
                  {{ team.name }} (Coach: {{ team.coach }})
                </mat-option>
              </mat-select>
              <mat-error *ngIf="playerForm.get('teamId')?.hasError('required')">
                Team is required
              </mat-error>
            </mat-form-field>
          </div>

          <div class="actions-container">
            <button
              type="button"
              mat-button
              color="accent"
              (click)="cancel()"
              [disabled]="saving"
            >
              <mat-icon>cancel</mat-icon> Cancel
            </button>
            <button
              type="submit"
              mat-raised-button
              color="primary"
              [disabled]="playerForm.invalid || saving"
            >
              <mat-icon>save</mat-icon>
              <span *ngIf="!saving">Save Changes</span>
              <span *ngIf="saving">Saving...</span>
            </button>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
</div>
